

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>convert_source.cs_utils package &mdash; convert_source 0.1.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="convert_source.imgio package" href="convert_source.imgio.html" />
    <link rel="prev" title="convert_source package" href="convert_source.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> convert_source
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="outputs.html">Ouputs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">convert_source</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="convert_source.html">convert_source package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="convert_source.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">convert_source.cs_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="convert_source.imgio.html">convert_source.imgio package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="convert_source.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="convert_source.html#module-convert_source.batch_convert">convert_source.batch_convert module</a></li>
<li class="toctree-l3"><a class="reference internal" href="convert_source.html#module-convert_source">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">convert_source</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">convert_source</a> &raquo;</li>
        
          <li><a href="convert_source.html">convert_source package</a> &raquo;</li>
        
      <li>convert_source.cs_utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/convert_source.cs_utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="convert-source-cs-utils-package">
<h1>convert_source.cs_utils package<a class="headerlink" href="#convert-source-cs-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-convert_source.cs_utils.bids_info">
<span id="convert-source-cs-utils-bids-info-module"></span><h2>convert_source.cs_utils.bids_info module<a class="headerlink" href="#module-convert_source.cs_utils.bids_info" title="Permalink to this headline">¶</a></h2>
<p>BIDS (Brain Imaging Data Structure) related exceptions, and functions for ascertaining metadata and filenames.</p>
<dl class="py exception">
<dt id="convert_source.cs_utils.bids_info.BIDSMetaDataError">
<em class="property">exception </em><code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">BIDSMetaDataError</code><a class="headerlink" href="#convert_source.cs_utils.bids_info.BIDSMetaDataError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt id="convert_source.cs_utils.bids_info.BIDSNameError">
<em class="property">exception </em><code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">BIDSNameError</code><a class="headerlink" href="#convert_source.cs_utils.bids_info.BIDSNameError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.bids_info.construct_bids_dict">
<code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">construct_bids_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">meta_dict</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">json_dict</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#convert_source.cs_utils.bids_info.construct_bids_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs dictionary of relevant BIDS related information that includes subject and session IDs, in addition
to various metadata. Custom BIDS fields can also be added through the metadata dictionary.</p>
<dl>
<dt>More information can be obtained from:</dt><dd><p><a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/01-magnetic-resonance-imaging-data.html">https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/01-magnetic-resonance-imaging-data.html</a>.</p>
</dd>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bids_dict</span> <span class="o">=</span> <span class="n">construct_bids_dict</span><span class="p">(</span><span class="n">meta_dict</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">json_dict</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meta_dict</strong> – Metadata dictionary that contains the relevant BIDS metadata.</p></li>
<li><p><strong>json_dict</strong> – Dictionary constructed from the BIDS JSON file, or some secondary dictionary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary containing BIDS related metadata.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>IndexError</strong> – Error that arises if constant variables <cite>BIDS_INFO</cite>’s keys and BIDS_ORD_ARR are of different lengths.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.bids_info.construct_bids_name">
<code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">construct_bids_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sub_data</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#convert_source.cs_utils.utils.SubDataInfo" title="convert_source.cs_utils.utils.SubDataInfo">convert_source.cs_utils.utils.SubDataInfo</a></span></em>, <em class="sig-param"><span class="n">modality_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">modality_label</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">acq</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">ce</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">task</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">acq_dir</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">rec</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">run</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">echo</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">case1</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">mag2</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">case2</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">case3</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">case4</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">zero_pad</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#convert_source.cs_utils.bids_info.construct_bids_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs BIDS filenames from input paraemter descriptions.</p>
<dl>
<dt>More information can be obtained from:</dt><dd><p><a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/01-magnetic-resonance-imaging-data.html">https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/01-magnetic-resonance-imaging-data.html</a>.</p>
</dd>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bids_param</span> <span class="o">=</span> <span class="n">construct_bids_name</span><span class="p">(</span><span class="n">sub_data</span><span class="o">=</span><span class="n">sub_data</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">modality_type</span><span class="o">=</span><span class="s1">&#39;func&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">modality_label</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">task</span><span class="o">=</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">run</span><span class="o">=</span><span class="s1">&#39;01&#39;</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sub_data</strong> – SubDataInfo object that contains subject and session ID.</p></li>
<li><p><strong>modality_type</strong> – Modality type associated with the data. Valid modality types include, but are not limited to:
* ‘anat’: Anatomical scans
* ‘func’: Functional scans
* ‘dwi’: Diffusion weighted image scans
* ‘fmap: ‘: Fieldmaps
* ‘swi’: Susceptibility weighted image scans</p></li>
<li><p><strong>modality_label</strong> – <p>Modality label of associated with the data. Valid modality labels include, but are not limited to:
* ‘T1w’, ‘T2w’, ‘PD’, ‘FLAIR’, ‘T1rho’ (in the case of ‘anat’).
* ‘bold’, ‘cbv’, ‘phase’ (in the case of ‘func’).</p>
<blockquote>
<div><ul>
<li><p>NOTE: In the case of ‘func’ modalities, these are referred to as “contrast_labels” in the BIDS documentation.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>acq</strong> – Acquisition description of the associated image data.</p></li>
<li><p><strong>ce</strong> – Contrast enhanced description of the associated image data.</p></li>
<li><p><strong>task</strong> – Task associated with the image data, required if ‘func’ is used as the modality_type.</p></li>
<li><p><strong>acq_dir</strong> – Acquisition direction of the image (e.g. PA, AP, LR, RL).</p></li>
<li><p><strong>rec</strong> – Image reconstruction description.</p></li>
<li><p><strong>run</strong> – Run number of the associated image data.</p></li>
<li><p><strong>echo</strong> – Echo number of the associated image data (, in the case of multi-echo data).</p></li>
<li><p><strong>case1</strong> – BIDS fieldmap case 1, set to True if the following files are present:
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phasediff.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phasediff.json
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_magnitude1.nii[.gz]
* [ sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_magnitude2.nii[.gz] ]</p></li>
<li><p><strong>mag2</strong> – Should be set to True, if case 1 contains a second magnitude image.</p></li>
<li><p><strong>case2</strong> – BIDS fieldmap case 2, set to True if the following files are present:
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phase1.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phase1.json
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phase2.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phase2.json
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_magnitude1.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_magnitude2.nii[.gz]</p></li>
<li><p><strong>case3</strong> – BIDS fieldmap case 3, set to True if the following files are present:
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_magnitude.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_fieldmap.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_fieldmap.json</p></li>
<li><p><strong>case4</strong> – BIDS fieldmap case 4, set to True if the following files are present:
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_ce-&lt;label&gt;]_dir-&lt;label&gt;[_run-&lt;index&gt;]_epi.nii[.gz]
* sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_ce-&lt;label&gt;]_dir-&lt;label&gt;[_run-&lt;index&gt;]_epi.json</p></li>
<li><p><strong>out_dir</strong> – Target output directory for a subject’s BIDS files.</p></li>
<li><p><strong>zero_pad</strong> – Number of zeroes to zeropad the output value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nested dictionary that contains the necessary information to name BIDS files.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#convert_source.cs_utils.bids_info.BIDSNameError" title="convert_source.cs_utils.bids_info.BIDSNameError"><strong>BIDSNameError</strong></a> – Error raised if:
    * ‘anat’ is the speicified modality_type, but no modality_label is specified.
    * ‘func’ is the speicified modality_type, but no modality_label is specified.
    * ‘func’ is the speicified modality_type, but no task is specified.
    * ‘fmap’ is the speicified modality_type, but no fieldmap ‘case’ is specified.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.bids_info.is_camel_case">
<code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">is_camel_case</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bids_case</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#convert_source.cs_utils.bids_info.is_camel_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if some input string is camel case (CamelCase).</p>
<dl>
<dt>NOTE: This function is configured for BIDS use cases, in which metadata must</dt><dd><p>be in camel case, with the first letter being uppercase.</p>
</dd>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_camel_case</span><span class="p">(</span><span class="s2">&quot;CamelCase&quot;</span><span class="p">,</span> <span class="n">bids_case</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_camel_case</span><span class="p">(</span><span class="s2">&quot;camelcase&quot;</span><span class="p">,</span> <span class="n">bids_case</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_camel_case</span><span class="p">(</span><span class="s2">&quot;camelCase&quot;</span><span class="p">,</span> <span class="n">bids_case</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_camel_case</span><span class="p">(</span><span class="s2">&quot;camelCase&quot;</span><span class="p">,</span> <span class="n">bids_case</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> – Input string to test.</p></li>
<li><p><strong>bids_case</strong> – In addition to being in camel case, the string’s first letter must also be
uppercase.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.bids_info.num_runs">
<code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">num_runs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">modality_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">modality_label</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">bids_dict</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zero_pad</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>int<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.bids_info.num_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the number of similarly named files in a directory to obtain a unique run number.
Optimal use of this function requires the:</p>
<blockquote>
<div><ul class="simple">
<li><p>search directory (directory)</p></li>
<li><p>modality type (modality_type)</p></li>
<li><p>BIDS filename dictionary (bids_dict)</p></li>
</ul>
</div></blockquote>
<p>NOTE: The optional input bids_dict is a nested dictionary constructed by the function <cite>construct_bids_name</cite>.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">num_runs</span><span class="p">(</span><span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">modality_type</span><span class="o">=</span><span class="s1">&#39;func&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">modality_label</span><span class="o">=</span><span class="s1">&#39;bold,</span>
<span class="gp">... </span>         <span class="n">bids_dict</span><span class="o">=</span><span class="n">bids_dict</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">zero_pad</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;001&#39;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – Input directory to search.</p></li>
<li><p><strong>modality_type</strong> – Modality type associated with the data. Valid modality types include, but are not limited to:
* ‘anat’: Anatomical scans
* ‘func’: Functional scans
* ‘dwi’: Diffusion weighted image scans
* ‘fmap: ‘: Fieldmaps
* ‘swi’: Susceptibility weighted image scans</p></li>
<li><p><strong>modality_label</strong> – <p>Modality label of associated with the data. Valid modality labels include, but are not limited to:
* ‘T1w’, ‘T2w’, ‘PD’, ‘FLAIR’, ‘T1rho’ (in the case of ‘anat’).
* ‘bold’, ‘cbv’, ‘phase’ (in the case of ‘func’).</p>
<blockquote>
<div><ul>
<li><p>NOTE: In the case of ‘func’ modalities, these are referred to as “contrast_labels” in the BIDS documentation.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>bids_dict</strong> – Nested BIDS name dictionary that contains relevant information to naming files.</p></li>
<li><p><strong>zero_pad</strong> – Number of zeroes to zeropad the output value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Integer (or string should the value be zeropadded).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.bids_info.search_bids">
<code class="sig-prename descclassname">convert_source.cs_utils.bids_info.</code><code class="sig-name descname">search_bids</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bids_search</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bids_map</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">modality_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">modality_label</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">task</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">bids_name_dict</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">{}</span></em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#convert_source.cs_utils.bids_info.search_bids" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs search of BIDS (or related terms) provided there are bids_search, and bids_map dictionaries, and some input
string (or file, represented as a string).</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bids_name_dict</span> <span class="o">=</span> <span class="n">search_bids</span><span class="p">(</span><span class="s2">&quot;image_file_0001.dcm&quot;</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">bids_search</span><span class="o">=</span><span class="n">bids_search_dict</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">bids_map</span><span class="o">=</span><span class="n">bids_map_dict</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">modality_type</span><span class="o">=</span><span class="s2">&quot;func&quot;</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">modality_label</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">task</span><span class="o">=</span><span class="s2">&quot;rest&quot;</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> – Input string (or file, represented as a string).</p></li>
<li><p><strong>bids_search</strong> – Heurestic BIDS related search terms.</p></li>
<li><p><strong>bids_map</strong> – Descriptive BIDS terms to be mapped to.</p></li>
<li><p><strong>modality_type</strong> – Modality type (e.g. ‘anat’, ‘func’, ‘dwi’ etc).</p></li>
<li><p><strong>modality_label</strong> – Modality label (e.g. ‘T1w’,’bold’,’dwi’ etc).</p></li>
<li><p><strong>task</strong> – Task label.</p></li>
<li><p><strong>bids_name_dict</strong> – Existing BIDS name dictionary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nested dictionary of BIDS descriptive naming related terms.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-convert_source.cs_utils.const">
<span id="convert-source-cs-utils-const-module"></span><h2>convert_source.cs_utils.const module<a class="headerlink" href="#module-convert_source.cs_utils.const" title="Permalink to this headline">¶</a></h2>
<p>Constants needed for several utility modules in convert_source.
The constant variables contained here include:</p>
<blockquote>
<div><ul class="simple">
<li><p>BIDS_INFO: BIDS metadata dictionary of BIDS related fields.</p></li>
<li><p>BIDS_ORD_ARR: Ordered array of BIDS metadata fields.</p></li>
<li><p>BIDS_PARAM: BIDS related parameters used for naming NIFTI, and their corresponding JSON files.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="module-convert_source.cs_utils.fileio">
<span id="convert-source-cs-utils-fileio-module"></span><h2>convert_source.cs_utils.fileio module<a class="headerlink" href="#module-convert_source.cs_utils.fileio" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Utility module for classes and functions that pertain to:</dt><dd><ul class="simple">
<li><p>file, and filename handling</p></li>
<li><p>temporary directory, and temporary file handling</p></li>
<li><p>Logging</p></li>
<li><p>Wrapper class for UNIX command line executables.</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt id="convert_source.cs_utils.fileio.Command">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">Command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">command</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.fileio.Command" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates a command and an empty command list for UNIX command line programs/applications. Primary use and
use-cases are intended for the subprocess module and its associated classes (i.e. Popen/call/run).</p>
<dl class="simple">
<dt>Attributes (class and instance attributes):</dt><dd><p>command (instance): Command to be performed on the command line.
cmd_list (instance): Mutable list that can be appended to.</p>
</dd>
</dl>
<dl class="py method">
<dt id="convert_source.cs_utils.fileio.Command.check_dependency">
<code class="sig-name descname">check_dependency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">err_msg</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">path_envs</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>bool<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.fileio.Command.check_dependency" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks dependency of some command line executable. Should the
dependency not be met, then an exception is raised. Check the
system path should problems arise and ensure that the executable
of interest is installed.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">figlet</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span><span class="s2">&quot;figlet&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">figlet</span><span class="o">.</span><span class="n">check_dependency</span><span class="p">()</span>   <span class="c1"># Raises exception if not in system path</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>err_msg</strong> – Error message to print to screen.</p></li>
<li><p><strong>path_envs</strong> – List of directory paths to append to the system’s ‘PATH’ variable.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns True if dependency is met.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#convert_source.cs_utils.fileio.DependencyError" title="convert_source.cs_utils.fileio.DependencyError"><strong>DependencyError</strong></a> – Dependency error exception is raised if the dependency
    is not met.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.Command.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#convert_source.cs_utils.fileio.LogFile" title="convert_source.cs_utils.fileio.LogFile">convert_source.cs_utils.fileio.LogFile</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">debug</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">dryrun</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">path_envs</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">env</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">stdout</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File">convert_source.cs_utils.fileio.File</a></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">shell</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>int<span class="p">, </span><a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File">convert_source.cs_utils.fileio.File</a><span class="p">, </span><a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File">convert_source.cs_utils.fileio.File</a><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.fileio.Command.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses python’s built-in subprocess class to execute (run) a command from an input command list.
The standard output and error can optionally be written to file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The contents of the ‘stdout’ output file will be empty if ‘shell’ is set to True.</p></li>
<li><dl class="simple">
<dt>IF <cite>check_dependency</cite> was used with the <cite>path_envs</cite> argument, then the default system</dt><dd><p>PATH variable has been updated to include the list of specified paths.</p>
</dd>
</dl>
</li>
</ul>
</div>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create command and cmd_list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">echo</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span><span class="s2">&quot;echo&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">echo</span><span class="o">.</span><span class="n">cmd_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Hi!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">echo</span><span class="o">.</span><span class="n">cmd_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;I have arrived!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Run/execute command</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">echo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">(0, &#39;&#39;, &#39;&#39;)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log</strong> – LogFile object</p></li>
<li><p><strong>debug</strong> – Sets logging function verbosity to DEBUG level</p></li>
<li><p><strong>dryrun</strong> – Dry run – does not run task. Command is recorded to log file.</p></li>
<li><p><strong>path_envs</strong> – List of directory paths to append to the system’s ‘PATH’ variable.</p></li>
<li><p><strong>env</strong> – Dictionary of environment variables to add to subshell.</p></li>
<li><p><strong>stdout</strong> – Output file to write standard output to.</p></li>
<li><p><strong>shell</strong> – Use shell to execute command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return code for command execution should the ‘log_file’ option be used.
stdout: Standard output writtent to file should the ‘stdout’ option be used.
stderr: Standard error writtent to file should the ‘stdout’ option be used.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>p.returncode</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="convert_source.cs_utils.fileio.ConversionError">
<em class="property">exception </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">ConversionError</code><a class="headerlink" href="#convert_source.cs_utils.fileio.ConversionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt id="convert_source.cs_utils.fileio.DependencyError">
<em class="property">exception </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">DependencyError</code><a class="headerlink" href="#convert_source.cs_utils.fileio.DependencyError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="convert_source.cs_utils.fileio.File">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">File</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">ext</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.fileio.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates File object that encapsulates a number of methods and properites
for file and filename handling.</p>
<dl class="simple">
<dt>Attributes (class and instance attributes):</dt><dd><p>file (class and instance): Class variable that is set once class is instantiated.</p>
</dd>
</dl>
<dl class="py method">
<dt id="convert_source.cs_utils.fileio.File.abs_path">
<code class="sig-name descname">abs_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.fileio.File.abs_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns absolute path of file.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;file_name.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span><span class="o">.</span><span class="n">abs_path</span><span class="p">()</span>
<span class="go">&quot;abspath/to/file_namt.txt&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.fileio.File.file">
<code class="sig-name descname">file</code><em class="property">: str</em><em class="property"> = ''</em><a class="headerlink" href="#convert_source.cs_utils.fileio.File.file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.File.file_parts">
<code class="sig-name descname">file_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ext</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.fileio.File.file_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to MATLAB’s <cite>fileparts</cite>, this function splits a file and its path
into its constituent parts:</p>
<blockquote>
<div><ul class="simple">
<li><p>file path</p></li>
<li><p>filename</p></li>
<li><p>extension</p></li>
</ul>
</div></blockquote>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;file_name.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span><span class="o">.</span><span class="n">file_parts</span><span class="p">()</span>
<span class="go">(&quot;path/to/file&quot;, &quot;filename&quot;, &quot;.ext&quot;)   # .ext = file extension</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ext</strong> – File extension, needed if the file extension of file
object is longer than 4 characters.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Absolute file path, excluding filename.
filename: Filename, excluding extension.
ext: File extension.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.File.rm_ext">
<code class="sig-name descname">rm_ext</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ext</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.fileio.File.rm_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes file extension from the file.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;file_name.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span><span class="o">.</span><span class="n">rm_ext</span><span class="p">()</span>
<span class="go">&quot;file_name&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ext</strong> – File extension.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File name with no extension.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.File.touch">
<code class="sig-name descname">touch</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.File.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates empty file.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;file_name.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>   <span class="c1"># Creates empty file</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.File.write_txt">
<code class="sig-name descname">write_txt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">txt</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.File.write_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes/appends text to file.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;file_name.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span><span class="o">.</span><span class="n">write_txt</span><span class="p">(</span><span class="s2">&quot;&lt;Text to be written&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>txt</strong> – Text to be written to file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File with text written/appended to it.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>file</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="convert_source.cs_utils.fileio.LogFile">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">LogFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log_file</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.fileio.LogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">convert_source.cs_utils.fileio.File</span></code></a></p>
<p>Class that creates a log file for logging purposes. Due to how this
class is constructed - its intended use case requires that this class
is instantiated/called once and ONLY once.</p>
<p>Once a class instance has been instantiated, then it and its associated
methods can be used.</p>
<dl class="simple">
<dt>Attributes (class and instance attributes):</dt><dd><p>log_file: Log file filename.</p>
</dd>
</dl>
<dl class="py method">
<dt id="convert_source.cs_utils.fileio.LogFile.debug">
<code class="sig-name descname">debug</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.LogFile.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes debug information to file.</p>
<dl>
<dt>Usage examples:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">log</span> <span class="o">=</span> <span class="n">LogFile</span><span class="p">(</span><span class="s2">&quot;file.log&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;&lt;str&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – String to be printed to log file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.LogFile.error">
<code class="sig-name descname">error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.LogFile.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes error information to file.</p>
<dl>
<dt>Usage examples:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">log</span> <span class="o">=</span> <span class="n">LogFile</span><span class="p">(</span><span class="s2">&quot;file.log&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;&lt;str&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – String to be printed to log file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.LogFile.info">
<code class="sig-name descname">info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.LogFile.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes information to log file.</p>
<dl>
<dt>Usage examples:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">log</span> <span class="o">=</span> <span class="n">LogFile</span><span class="p">(</span><span class="s2">&quot;file.log&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&lt;str&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – String to be printed to log file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.LogFile.log">
<code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log_cmd</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.LogFile.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Log function for logging commands and messages to some log file.</p>
<dl>
<dt>Usage examples:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">log</span> <span class="o">=</span> <span class="n">LogFile</span><span class="p">(</span><span class="s2">&quot;file.log&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;&lt;str&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_cmd</strong> – Message to be written to log file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.LogFile.warning">
<code class="sig-name descname">warning</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.LogFile.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes warnings to file.</p>
<dl>
<dt>Usage examples:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">log</span> <span class="o">=</span> <span class="n">LogFile</span><span class="p">(</span><span class="s2">&quot;file.log&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;&lt;str&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – String to be printed to log file.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="convert_source.cs_utils.fileio.NiiFile">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">NiiFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File">convert_source.cs_utils.fileio.File</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.fileio.NiiFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">convert_source.cs_utils.fileio.File</span></code></a></p>
<p>NIFTI file class object for handling NIFTI files. Inherits methods and
properties from the File class.</p>
<dl class="simple">
<dt>Attributes (class and instance attributes):</dt><dd><p>file (class and instance): NIFTI file path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="convert_source.cs_utils.fileio.TmpDir">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.fileio.</code><code class="sig-name descname">TmpDir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tmp_dir</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">use_cwd</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Temporary directory class that creates temporary directories and files
given a parent directory.</p>
<dl class="simple">
<dt>Attributes (class and instance attributes):</dt><dd><p>tmp_dir (class and instance): Temproary directory.
parent_tmp_dir (class and instance): Input parent directory.</p>
</dd>
</dl>
<dl class="py class">
<dt id="convert_source.cs_utils.fileio.TmpDir.TmpFile">
<em class="property">class </em><code class="sig-name descname">TmpFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tmp_dir</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">tmp_file</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">ext</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.TmpFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">convert_source.cs_utils.fileio.File</span></code></a></p>
<p>Child/sub-class of TmpDir. Creates temporary files by inheriting File object
methods and properties from the File class.</p>
<dl class="simple">
<dt>Attributes (class and instance attributes):</dt><dd><p>tmp_file (class and instance): Temporary file name.
tmp_dir (class and instance): Temporary directory name.</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="convert_source.cs_utils.fileio.TmpDir.TmpFile.tmp_dir">
<code class="sig-name descname">tmp_dir</code><em class="property">: str</em><em class="property"> = ''</em><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.TmpFile.tmp_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.fileio.TmpDir.TmpFile.tmp_file">
<code class="sig-name descname">tmp_file</code><em class="property">: <a class="reference internal" href="#convert_source.cs_utils.fileio.File" title="convert_source.cs_utils.fileio.File">convert_source.cs_utils.fileio.File</a></em><em class="property"> = ''</em><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.TmpFile.tmp_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.TmpDir.mk_tmp_dir">
<code class="sig-name descname">mk_tmp_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.mk_tmp_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates/makes temporary directory.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tmp_directory</span> <span class="o">=</span> <span class="n">TmpDir</span><span class="p">(</span><span class="s2">&quot;/path/to/temporary_directory&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tmp_directory</span><span class="o">.</span><span class="n">mk_tmp_dir</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.fileio.TmpDir.parent_tmp_dir">
<code class="sig-name descname">parent_tmp_dir</code><em class="property">: str</em><em class="property"> = ''</em><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.parent_tmp_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.fileio.TmpDir.rm_tmp_dir">
<code class="sig-name descname">rm_tmp_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rm_parent</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.rm_tmp_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes temporary directory.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tmp_directory</span> <span class="o">=</span> <span class="n">TmpDir</span><span class="p">(</span><span class="s2">&quot;/path/to/temporary_directory&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tmp_directory</span><span class="o">.</span><span class="n">rm_tmp_dir</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rm_parent</strong> – Removes parent directory as well.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.fileio.TmpDir.tmp_dir">
<code class="sig-name descname">tmp_dir</code><em class="property">: str</em><em class="property"> = ''</em><a class="headerlink" href="#convert_source.cs_utils.fileio.TmpDir.tmp_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-convert_source.cs_utils.img_dir">
<span id="convert-source-cs-utils-img-dir-module"></span><h2>convert_source.cs_utils.img_dir module<a class="headerlink" href="#module-convert_source.cs_utils.img_dir" title="Permalink to this headline">¶</a></h2>
<p>Determines file paths of child directories that contain medical images, and their corresponding image types from some parent directory.
Currently supports use with: DICOM, PAR REC, and NIFTI files.</p>
<dl class="py function">
<dt id="convert_source.cs_utils.img_dir.generate_img_list">
<code class="sig-prename descclassname">convert_source.cs_utils.img_dir.</code><code class="sig-name descname">generate_img_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">out_prefix</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.img_dir.generate_img_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates list of image-containing directories and their corresponding image types from some parent directory.
The full path of the child directories that contain the images are written to file, in addition to their respective
file types. The written files will contain ‘.dir_list.txt’ and ‘.type_list.txt’ appended to them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – Input parent directory of that contain medical images somewhere in its directory structure.</p></li>
<li><p><strong>out_prefix</strong> – Output file prefix for written files.</p></li>
<li><p><strong>verbose</strong> – Enable verbosity.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Child directories that contain medical images.
file_types: Corresponding file types to ‘dir_names’ list.
out_file_dir: Output file that contains the contents of ‘dir_names’.
out_file_type: Output file that contains the contents of ‘file_types’.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dir_names</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.img_dir.id_img_file">
<code class="sig-prename descclassname">convert_source.cs_utils.img_dir.</code><code class="sig-name descname">id_img_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir_names</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.img_dir.id_img_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates list of file-types that either contain the label: DCM (DICOM), NII (NifTi), PAR (PAR REC), or Unknown.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir_names</strong> – Input directory names list.</p></li>
<li><p><strong>verbose</strong> – Enable verbose output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of file-types that corresponds to input directory names list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.img_dir.img_dir_list">
<code class="sig-prename descclassname">convert_source.cs_utils.img_dir.</code><code class="sig-name descname">img_dir_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.img_dir.img_dir_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates list of image file directories and file-types for some parent directy. The image file directories list
is a sorted list consisting of unique file paths for each image file parent directory. The corresponding file-
types list consists of labels that are: DCM (DICOM), NII (NifTi), PAR (PAR REC), or Unknown - depending on the
file-types in the image file parent directories.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img_list</span><span class="p">,</span> <span class="n">type_list</span> <span class="o">=</span> <span class="n">img_dir_list</span><span class="p">(</span><span class="n">img_dir</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – Parent directory that contains subject image data directories</p></li>
<li><p><strong>verbose</strong> – Enable verbose output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of child directory names that contain image data.
file_types: List of file-types that corresponds to directory names list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dir_names</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.img_dir.list_to_file">
<code class="sig-prename descclassname">convert_source.cs_utils.img_dir.</code><code class="sig-name descname">list_to_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">in_list</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">out_file</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.img_dir.list_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes some input list to some file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_list</strong> – List of subjects.</p></li>
<li><p><strong>out_file</strong> – Output filename.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output file with list written to file.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-convert_source.cs_utils.utils">
<span id="convert-source-cs-utils-utils-module"></span><h2>convert_source.cs_utils.utils module<a class="headerlink" href="#module-convert_source.cs_utils.utils" title="Permalink to this headline">¶</a></h2>
<p>File utility functions for convert_source, which encapsulate file reading/writing for JSON files,
in addition to subject and session information data collection methods.</p>
<dl class="py class">
<dt id="convert_source.cs_utils.utils.BIDSimg">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">BIDSimg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">work_dir</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.utils.BIDSimg" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>File collection and organization object intended for handling
Brain Imaging Data Structure (BIDS) data in the process of being converted from source data to
NIFTI.</p>
<dl class="py attribute">
<dt id="convert_source.cs_utils.utils.BIDSimg.imgs">
<code class="sig-name descname">imgs</code><a class="headerlink" href="#convert_source.cs_utils.utils.BIDSimg.imgs" title="Permalink to this definition">¶</a></dt>
<dd><p>List of NIFTI files.</p>
</dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.utils.BIDSimg.jsons">
<code class="sig-name descname">jsons</code><a class="headerlink" href="#convert_source.cs_utils.utils.BIDSimg.jsons" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponding list of JSON sidecar(s).</p>
</dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.utils.BIDSimg.bvals">
<code class="sig-name descname">bvals</code><a class="headerlink" href="#convert_source.cs_utils.utils.BIDSimg.bvals" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponding list of bval file(s).</p>
</dd></dl>

<dl class="py attribute">
<dt id="convert_source.cs_utils.utils.BIDSimg.bvecs">
<code class="sig-name descname">bvecs</code><a class="headerlink" href="#convert_source.cs_utils.utils.BIDSimg.bvecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Corresponding list of bvec file(s).</p>
</dd></dl>

<dl class="py method">
<dt id="convert_source.cs_utils.utils.BIDSimg.copy_img_data">
<code class="sig-name descname">copy_img_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_dir</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.BIDSimg.copy_img_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies image data and their associated files to some target directory.</p>
<dl class="simple">
<dt>NOTE: This function resets the class attributes of the class instance with the</dt><dd><p>returns of this function.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target_dir</strong> – Target directory to copy files to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>NIFTI image files</p></li>
<li><p>Corresponding JSON file(s)</p></li>
<li><p>Corresponding bval file(s)</p></li>
<li><p>Corresponding bvec file(s)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple of four lists of strings that correspond to</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="convert_source.cs_utils.utils.SubDataInfo">
<em class="property">class </em><code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">SubDataInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sub</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">ses</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#convert_source.cs_utils.utils.SubDataInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class instance that creates a data object that organizes a subject’s
identification (ID) number, session ID number, and the
path to the image data directory. This information is then stored for
each separate class instance, and can be accessed as shown in the example
usage.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sub_info</span> <span class="o">=</span> <span class="n">SubDataInfo</span><span class="p">(</span><span class="n">sub</span><span class="o">=</span><span class="s2">&quot;002&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">data</span><span class="o">=</span><span class="s2">&quot;&lt;path/to/img/data&gt;&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">ses</span><span class="o">=</span><span class="s2">&quot;001&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sub_info</span><span class="o">.</span><span class="n">sub</span>
<span class="go">&quot;002&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sub_info</span><span class="o">.</span><span class="n">ses</span>
<span class="go">&quot;001&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt id="convert_source.cs_utils.utils.SubInfoError">
<em class="property">exception </em><code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">SubInfoError</code><a class="headerlink" href="#convert_source.cs_utils.utils.SubInfoError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.add_to_zeropadded">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">add_to_zeropadded</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num1</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">num2</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.add_to_zeropadded" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds some specified integer to another zeropadded integer.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_to_zeropadded</span><span class="p">(</span><span class="s1">&#39;005&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;007&#39;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num1</strong> – Input integer, or zeropadded integer represented as a string.</p></li>
<li><p><strong>num2</strong> – Integer to add to num1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Sum of the two perceived integer values, represented as a string.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – Error that arises if non-integer string representations are passed as an argument for num1.</p></li>
<li><p><strong>TypeError</strong> – Error that arise if non-integer arguments are passed for num2, OR if floats are passed for either num1 or num2.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.calc_read_time">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">calc_read_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>Tuple<span class="p">[</span>float<span class="p">, </span>float<span class="p">]</span><span class="p">, </span>Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.calc_read_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the effective echo spacing and total readout time provided several combinations of parameters.
Several approaches and methods to calculating the effective echo spacing and total readout within this function
differ and are dependent on the parameters found within the provided JSON sidecar. Currently, there a four
approaches for calculating the effective echo space (all with differing values) and two ways of calculating
the total readout time. It should also be noted that several of these approaches are vendor specific (e.g. at
the time of writing, 16 Jan 2019, the necessary information for approach 1 is only found in Siemens DICOM
headers - the necessary information for approach 2 is only possible if the data is stored in PAR REC format as the
WaterFatShift is a private tag in the Philips DICOM header - approaches 3 and 4 are intended for Philips/GE DICOMs
as those values are anticipated to exist in their DICOM headers).</p>
<p>NOTE: This function’s calculation of the Effective Echo Spacing and the Total Readout Time ASSUME that the magnetic field strength is 3T.</p>
<p>The approaches are listed below:</p>
<dl>
<dt>Approach 1 (BIDS method, Siemens):</dt><dd><p>BWPPPE = BandwidthPerPixelPhaseEncode
EffectiveEchoSpacing = 1/[BWPPPE * ReconMatrixPE]
TotalReadoutTime = EffectiveEchoSpacing * (ReconMatrixPE - 1)</p>
</dd>
<dt>Approach 2 (Philips method - PAR REC):</dt><dd><p>EffectiveEchoSpacing = (((1000 * WaterFatShift)/(434.215 * (EchoTrainLength + 1)))/ParallelReductionFactorInPlane)
TotalReadoutTime = 0.001 * EffectiveEchoSpacing * EchoTrainLength</p>
</dd>
<dt>Approach 3 (Philips/GE method - DICOM):</dt><dd><p>EffectiveEchoSpacing = ((1/(PixelBandwidth * EchoTrainLength)) * (EchoTrainLength - 1)) * 1.3
TotalReadoutTime = EffectiveEchoSpacing * (EchoTrainLength - 1)</p>
</dd>
<dt>Approach 4 (Philips/GE method - DICOM):</dt><dd><p>EffectiveEchoSpacing = ((1/(PixelBandwidth * ReconMatrixPE)) * (ReconMatrixPE - 1)) * 1.3
tot_read_time = EffectiveEchoSpacing * (ReconMatrixPE - 1)</p>
<p>Note: EchoTrainLength is assumed to be equal to ReconMatrixPE for approaches 3 and 4, as these values are generally close.
Note: Approaches 3 and 4 appear to have about a 30% decrease in Siemens data when this was tested. The solution was to implement a fudge factor that accounted for the 30% decrease.</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>Approach 1: <a class="reference external" href="https://github.com/bids-standard/bids-specification/blob/master/src/04-modality-specific-files/01-magnetic-resonance-imaging-data.md">https://github.com/bids-standard/bids-specification/blob/master/src/04-modality-specific-files/01-magnetic-resonance-imaging-data.md</a>
Approach 2: <a class="reference external" href="https://osf.io/hks7x/">https://osf.io/hks7x/</a> - page 7;</p>
<blockquote>
<div><p><a class="reference external" href="https://support.brainvoyager.com/brainvoyager/functional-analysis-preparation/29-pre-processing/78-epi-distortion-correction-echo-spacing-and-bandwidth">https://support.brainvoyager.com/brainvoyager/functional-analysis-preparation/29-pre-processing/78-epi-distortion-correction-echo-spacing-and-bandwidth</a></p>
</div></blockquote>
<p>Forum that raised this specific issue with Philips: <a class="reference external" href="https://neurostars.org/t/consolidating-epi-echo-spacing-and-readout-time-for-philips-scanner/4406">https://neurostars.org/t/consolidating-epi-echo-spacing-and-readout-time-for-philips-scanner/4406</a></p>
<p>Approaches 3 and 4 were found thorugh trial and error and yielded similar, but not the same values as approaches 1 and 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – Filepath to raw image data file (DICOM or PAR REC)</p></li>
<li><p><strong>json_file</strong> – Filepath to corresponding JSON sidecar.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Tuple of floats that correspond to the Effective Echo Spacing and the Total Readout Time,</dt><dd><p>OR</p>
</dd>
</dl>
<p>Empty strings if the values cannot be calculated.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.collect_info">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">collect_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent_dir</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">exclusion_list</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#convert_source.cs_utils.utils.SubDataInfo" title="convert_source.cs_utils.utils.SubDataInfo">convert_source.cs_utils.utils.SubDataInfo</a><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.collect_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects image data information for each subject for a study,
provided there exists some parent directory. Certain image files
can be excluded provided a list of exclusion keywords/terms.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">collect_info</span><span class="p">(</span><span class="s2">&quot;&lt;parent/directory&gt;&quot;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="p">[</span><span class="s2">&quot;SWI&quot;</span><span class="p">,</span> <span class="s2">&quot;PD&quot;</span><span class="p">,</span> <span class="s2">&quot;ProtonDensity&quot;</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sub</span>
<span class="go">&quot;&lt;subject_ID&gt;&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<span class="go">&quot;&lt;path/to/data&gt;&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ses</span>
<span class="go">&quot;&lt;session_ID&gt;&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parent_dir</strong> – Parent directory that contains each subject.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>List/Array of SubDataInfo objects that corresponds to a subject ID,</dt><dd><p>session ID, and path to medical image data.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.comp_dict">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">comp_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d1</span><span class="p">:</span> <span class="n">Dict</span></em>, <em class="sig-param"><span class="n">d2</span><span class="p">:</span> <span class="n">Dict</span></em>, <em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>bool<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.comp_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares 2 dictionaries to see if they have matching keys, and that each key maps
to a value (that is NOT of type None). This is performed recursively.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_dict</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d1</strong> – Input dictionary.</p></li>
<li><p><strong>d2</strong> – Input dictionary.</p></li>
<li><p><strong>path</strong> – Visualized path that has been traversed.</p></li>
<li><p><strong>verbose</strong> – Print verbose output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean ‘True’, raises exceptions otherwise.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>KeyError</strong> – Error that arises if input dictionaries do not have matching keys.</p></li>
<li><p><strong>ValueError</strong> – Error that arises if one or more of the keys in either dictionary map
    NoneType values.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.convert_image_data">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">convert_image_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">basename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">out_dir</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">cprss_lvl</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">6</span></em>, <em class="sig-param"><span class="n">bids</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">anon_bids</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">gzip</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">comment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">adjacent</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">dir_search</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">nrrd</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_2D</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">merge_2D</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">text</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">progress</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">write_conflicts</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'suffix'</span></em>, <em class="sig-param"><span class="n">crop_3D</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'n'</span></em>, <em class="sig-param"><span class="n">lossless</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">big_endian</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'o'</span></em>, <em class="sig-param"><span class="n">xml</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">log</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#convert_source.cs_utils.fileio.LogFile" title="convert_source.cs_utils.fileio.LogFile">convert_source.cs_utils.fileio.LogFile</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">env</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dryrun</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">return_obj</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="#convert_source.cs_utils.utils.BIDSimg" title="convert_source.cs_utils.utils.BIDSimg">convert_source.cs_utils.utils.BIDSimg</a><span class="p">, </span>Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.convert_image_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts medical image data (DICOM, PAR REC, or Bruker) to NifTi (or NRRD) using dcm2niix.
This is a wrapper function for dcm2niix (v1.0.20201102+).</p>
<dl>
<dt>NOTE: IF <cite>dcm2niix</cite> is not in system path, then its parent’s directory path can be appended to</dt><dd><p>the system’s PATH variable by doing:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">convert_source.cs_utils.fileio</span> <span class="kn">import</span> <span class="n">Command</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dcm2niix_command</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span><span class="s2">&quot;dcm2niix&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dcm2niix_command</span><span class="o">.</span><span class="n">check_dependency</span><span class="p">(</span><span class="n">path_envs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&lt;path/to/dcm2niix/dir&gt;&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>One should note that argument passed for the <cite>path_envs</cite> argument is a list.
Additionally, the last statement above should return <cite>True</cite> if the executable is found, or raise
a DependencyError otherwise.</p>
</dd>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">convert_image_data</span><span class="p">(</span><span class="s2">&quot;IM00001.dcm&quot;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="s2">&quot;img0001&quot;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="s2">&quot;&lt;path/to/out/directory&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">imgs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&quot;&lt;path/to/image.nii&gt;&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">jsons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&quot;&lt;path/to/image.json&gt;&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">bvals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&quot;&lt;path/to/image.bval&gt;&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">bvecs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&quot;&lt;path/to/image.bvec&gt;&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – Absolute path to raw image data file.</p></li>
<li><p><strong>basename</strong> – Output file(s) basename.</p></li>
<li><p><strong>out_dir</strong> – Absolute path to output directory (must exist at runtime).</p></li>
<li><p><strong>cprss_lvl</strong> – Compression level [1 - 9] - 1 is fastest, 9 is smallest (default: 6).</p></li>
<li><p><strong>bids</strong> – BIDS (JSON) sidecar (default: True).</p></li>
<li><p><strong>anon_bids</strong> – Anonymize BIDS (default: True).</p></li>
<li><p><strong>gzip</strong> – Gzip compress images (default: True).</p></li>
<li><p><strong>comment</strong> – Image comment(s) stored in NifTi header (default: True).</p></li>
<li><p><strong>adjacent</strong> – Assumes adjacent DICOMs/Image data (images from same series always in same folder) for faster conversion (default: False).</p></li>
<li><p><strong>dir_search</strong> – Directory search depth (default: 5).</p></li>
<li><p><strong>nrrd</strong> – Export as NRRD instead of NifTi, not recommended (default: False).</p></li>
<li><p><strong>ignore_2D</strong> – Ignore derived, localizer and 2D images (default: True).</p></li>
<li><p><strong>merge_2D</strong> – Merge 2D slices from same series regardless of echo, exposure, etc. (default: True).</p></li>
<li><p><strong>text</strong> – Text notes includes private patient details in separate text file (default: False).</p></li>
<li><p><strong>progress</strong> – Report progress, slicer format progress information (default: False).</p></li>
<li><p><strong>verbose</strong> – Enable verbosity (default: False).</p></li>
<li><p><strong>write_conflicts</strong> – Write behavior for name conflicts:
* ‘suffix’ = Add suffix to name conflict (default)
* ‘overwrite’ = Overwrite name conflict
* ‘skip’ = Skip name conflict</p></li>
<li><p><strong>crop_3D</strong> – Crop 3D acquisitions (y/n/i, default n, use ‘i’gnore to neither crop nor rotate 3D acquistions).</p></li>
<li><p><strong>lossless</strong> – Losslessly scale 16-bit integers to use dynamic range (default: True).</p></li>
<li><p><strong>big_endian</strong> – Byte order:
* ‘o’ = optimal/native byte order (default)
* ‘n’ = little endian
* ‘y’ = big endian</p></li>
<li><p><strong>xml</strong> – Slicer format features (default: False).</p></li>
<li><p><strong>log</strong> – LogFile object for logging.</p></li>
<li><p><strong>env</strong> – Path environment dictionary.</p></li>
<li><p><strong>dryrun</strong> – Perform dryrun (creates the command, but does not execute it).</p></li>
<li><p><strong>return_obj</strong> – Boolean to return object, rather than a tuple of lists.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><dl class="simple">
<dt>imgs: List of NIFTI image files</dt><dd><ul>
<li><p>jsons: Corresponding list of JSON file(s)</p></li>
<li><p>bvals: Corresponding bval file(s)</p></li>
<li><p>bvecs: Corresponding bvec file(s)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>OR</p>
<dl class="simple">
<dt>Tuple of four lists of strings that correspond to:</dt><dd><ul class="simple">
<li><p>NIFTI image files</p></li>
<li><p>Corresponding JSON file(s)</p></li>
<li><p>Corresponding bval file(s)</p></li>
<li><p>Corresponding bvec file(s)</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>BIDSimg data object that contains</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#convert_source.cs_utils.fileio.ConversionError" title="convert_source.cs_utils.fileio.ConversionError"><strong>ConversionError</strong></a> – Error that arises if no converted (NIFTI) images are created.</p></li>
<li><p><strong>IndexError</strong> – Error that arises if the specified options arrays/lists are of different lengths.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.depth">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">depth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#convert_source.cs_utils.utils.depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses breadth-first search approach to find the depth of a dictionary.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">depth</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – Input dictionary.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of levels in dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.dict_multi_update">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">dict_multi_update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dictionary</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#convert_source.cs_utils.utils.dict_multi_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates a dictionary multiple times depending on the number key word mapped pairs that are provided and
returns a separate updated dictionary. The dictionary passed as an argument need not exist at runtime.</p>
<dl>
<dt>Example usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_dict</span> <span class="o">=</span> <span class="n">dict_multi_update</span><span class="p">(</span><span class="n">old_dict</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">Manufacturer</span><span class="o">=</span><span class="s2">&quot;Philips&quot;</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">ManufacturersModelName</span><span class="o">=</span><span class="s2">&quot;Ingenia&quot;</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">MagneticFieldStrength</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">InstitutionName</span><span class="o">=</span><span class="s2">&quot;CCHMC&quot;</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary</strong> – Dictionary of key mapped items to be updated.</p></li>
<li><p><strong>**kwargs</strong> – Key-value (key=value) pairs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>New updated dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.file_to_screen">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">file_to_screen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.file_to_screen" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the contents of a file and prints it to screen.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> – Path to file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File contents returned as string, printed to screen.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_bvals">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_bvals</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bval_file</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>int<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.get_bvals" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the bvals from the (FSL-style) bvalue file and returns a list of unique non-zero bvalues.
If the bval file does not exist or is not provided, then zero is returned in a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bval_file</strong> – Bval (.bval) file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of unique, non-zero bvalues (as ints), or zero in a list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_dcm_scan_tech">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_dcm_scan_tech</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dcm_file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">search_dict</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.get_dcm_scan_tech" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches DICOM file header for scan technique/MR modality used in accordance with the search terms provided by the
nested heursitic search dictionary. The DICOM header field searched is a Philips DICOM private tag (2001,1020) [Scanning
Technique Description MR]. In the case that matches are found in that field, is empty, or does not exist - then common
DICOM tags are searched which include:</p>
<blockquote>
<div><ul class="simple">
<li><p>Series Description</p></li>
<li><p>Protocol Name</p></li>
<li><p>Image Type.</p></li>
</ul>
</div></blockquote>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">modality_type</span><span class="p">,</span> <span class="n">modality_label</span><span class="p">,</span> <span class="n">task</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_dcm_scan_tech</span><span class="p">(</span><span class="n">dcm_file</span><span class="p">,</span>
<span class="gp">... </span>                                                          <span class="n">search_dict</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dcm_file</strong> – DICOM filename.</p></li>
<li><p><strong>search_dict</strong> – Nested heursitic search dictionary (from the <cite>read_config</cite> function).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>modality_type: Modality type (e.g. ‘anat’, ‘func’, etc.)</p></li>
<li><p>modality_label: Modality label (e.g. ‘T1w’,’bold’, etc.)</p></li>
<li><p>task: Task name.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple of strings that consist of</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_echo">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_echo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#convert_source.cs_utils.utils.get_echo" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the echo time (TE) from the NIFTI JSON sidecar and returns it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> (<em>string</em>) – Absolute path to JSON sidecar.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Echo time as a float.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_metadata">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dictionary</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">modality_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">task</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span>int<span class="p">, </span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the metadata dictionary and looks for keywords to indicate what metadata should be written to which
dictionary. For example, the keyword ‘common’ is used to indicate the common information for the imaging
protocol and may contain information such as: field strength, phase encoding direction, institution name, etc.
Additional keywords that are BIDS sub-directories names (e.g. anat, func, dwi) will return an additional
dictionary which contains metadata specific for those modalities. ‘Func’ also has additional keywords based on
the task specified. If an empty dictionary is passed as an argument, then this function returns empty dictionaries
as a result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary</strong> – Nested dictionary of key mapped items from the ‘read_config’ function.</p></li>
<li><p><strong>modality_type</strong> – BIDS modality type (e.g. anat, func, dwi, etc.).</p></li>
<li><p><strong>task</strong> – Task name to search in the key mapped dictionary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Common metadata dictionary.</p></li>
<li><p>Modality specific metadata dictionaries.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple of dictionaries that contain</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_par_scan_tech">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_par_scan_tech</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">par_file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">search_dict</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.get_par_scan_tech" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches PAR file header for scan technique/MR modality used in accordance with the search terms provided by the
nested heursitic search dictionary. A regular expression (regEx) search string is defined and is searched in the
PAR header file.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">modality_type</span><span class="p">,</span> <span class="n">modality_label</span><span class="p">,</span> <span class="n">task</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_par_scan_tech</span><span class="p">(</span><span class="n">par_file</span><span class="p">,</span>
<span class="gp">... </span>                                                          <span class="n">search_dict</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>par_file</strong> – PAR filename.</p></li>
<li><p><strong>search_dict</strong> – Nested heursitic search dictionary (from the <cite>read_config</cite> function).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>modality_type: Modality type (e.g. ‘anat’, ‘func’, etc.)</p></li>
<li><p>modality_label: Modality label (e.g. ‘T1w’,’bold’, etc.)</p></li>
<li><p>task: Task name.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple of strings that consist of</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_pix_band">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_pix_band</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>float<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.get_pix_band" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads pixel bandwidth value from the JSON sidecar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> (<em>string</em>) – BIDS JSON file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pixel bandwidth value (as a float if it exists in the file, or as an empty string if not in the file).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.get_recon_mat">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">get_recon_mat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>float<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.get_recon_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads ReconMatrixPE (reconstruction matrix phase encode) value from the JSON sidecar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> – BIDS JSON file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Recon Matrix PE value (as a float if it exists in the file, or as an empty string if not in the file).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.glob_dcm">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">glob_dcm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dcm_dir</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.glob_dcm" title="Permalink to this definition">¶</a></dt>
<dd><p>Globs subject DICOM data directories for the top-most DICOM file
in each respective directory.</p>
<dl>
<dt>Example usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dcm_files</span> <span class="o">=</span> <span class="n">glob_dcm</span><span class="p">(</span><span class="n">dcm_dir</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dcm_dir</strong> – Subject DICOM data directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of strings of image files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.glob_img">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">glob_img</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img_dir</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.glob_img" title="Permalink to this definition">¶</a></dt>
<dd><p>Globs image data files given a subject image data directory.
The image file types that are search for are:</p>
<blockquote>
<div><ul class="simple">
<li><p>DICOMs</p></li>
<li><p>PAR RECs</p></li>
<li><p>NIFTIs</p></li>
</ul>
</div></blockquote>
<dl>
<dt>Example usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img_list</span> <span class="o">=</span> <span class="n">glob_img</span><span class="p">(</span><span class="n">img_dir</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>img_dir</strong> – Path to image directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of strings of file paths to images.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.gunzip_file">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">gunzip_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">native</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.gunzip_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Gunzips file. Native implementation of gunzipping files is prefered with
this function provided that the system is UNIX. Otherwise, a pythonic
implementation of gunzipping is performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – Input file.</p></li>
<li><p><strong>native</strong> – Uses native implementation of gunzip.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Gunzipped file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.gzip_file">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">gzip_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">native</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.gzip_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Gzips file. Native implementation of gzipping files is prefered with
this function provided that the system is UNIX. Otherwise, a pythonic
implementation of gzipping is performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – Input file.</p></li>
<li><p><strong>native</strong> – Uses native implementation of gzip.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Gzipped file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.header_search">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">header_search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img_file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">search_dict</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>str<span class="p">, </span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.header_search" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches a DICOM or PAR file header for relevant scan technique/parameter information provided a nested heursitic search dictionary
of search terms to map scan acquisitions of interest. Any other image file passed as an argument will return a tuple of empty strings.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">modality_type</span><span class="p">,</span> <span class="n">modality_label</span><span class="p">,</span> <span class="n">task</span><span class="p">]</span> <span class="o">=</span> <span class="n">header_search</span><span class="p">(</span><span class="n">img_file</span><span class="p">,</span>
<span class="gp">... </span>                                                      <span class="n">search_dict</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_file</strong> – Input image data file path.</p></li>
<li><p><strong>search_dict</strong> – Nested heursitic dictionary of (BIDS) related search terms.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>modality_type: Modality type (e.g. ‘anat’, ‘func’, etc.)</p></li>
<li><p>modality_label: Modality label (e.g. ‘T1w’,’bold’, etc.)</p></li>
<li><p>task: Task name.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple of strings that consist of</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.img_exclude">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">img_exclude</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img_list</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">exclusion_list</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.img_exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a new list with files that DO NOT contain words in the exclusion list.
Should this list be empty, then the original input list is returned.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_img_list</span> <span class="o">=</span> <span class="n">img_exclude</span><span class="p">(</span><span class="n">img_list</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;SWI&quot;</span><span class="p">,</span> <span class="s2">&quot;PD&quot;</span><span class="p">,</span><span class="s2">&quot;ProtonDensity&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_list</strong> – Input list of paths to image files.</p></li>
<li><p><strong>exclusion_list</strong> – Exclusion list that consists of keywords used to exclude files.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of image files that do not contain words in the exclusion list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.list_dict">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">list_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#convert_source.cs_utils.utils.list_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of dictionaries provided a nested dictionary using the
top-most level of the dictionaries as list (array) indices.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">list_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">[d1, d2, ..., dn]</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – Input (nested) dictionary.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of dictionaries.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.list_in_substr">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">list_in_substr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">in_list</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">in_str</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#convert_source.cs_utils.utils.list_in_substr" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches a string using a list that contains substrings. Returns boolean ‘True’ or ‘False’
if any elements of the list are found within the string.</p>
<dl>
<dt>Example usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">list_in_substr</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="n">T1</span><span class="s1">&#39;,&#39;</span><span class="n">TFE</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;sub_T1_image_file&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_in_substr</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="n">T2</span><span class="s1">&#39;,&#39;</span><span class="n">TSE</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;sub_T1_image_file&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_list</strong> – List containing strings used for matching.</p></li>
<li><p><strong>in_str</strong> – Larger string to be searched for matches within substring.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean True or False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.read_json">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">read_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#convert_source.cs_utils.utils.read_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads JavaScript Object Notation (JSON) file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file</strong> – Input file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary of key mapped items from JSON file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.update_json">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">update_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">dictionary</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.update_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates JavaScript Object Notation (JSON) file. If the file does not exist, it is created once
this function is called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_file</strong> – Input file.</p></li>
<li><p><strong>dictionary</strong> – Dictionary of key mapped items to write to JSON file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Updated JSON file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.write_json">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">write_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">dictionary</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.write_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes python dictionary to a JavaScript Object Notation (JSON) file. The speicifed JSON file need not exist.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">json_file</span> <span class="o">=</span> <span class="n">write_json</span><span class="p">(</span><span class="s2">&quot;file.json&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">example_dict</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_file</strong> – Input JSON file.</p></li>
<li><p><strong>dictionary</strong> – Input python dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String that represents path to written JSON file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="convert_source.cs_utils.utils.zeropad">
<code class="sig-prename descclassname">convert_source.cs_utils.utils.</code><code class="sig-name descname">zeropad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">num_zeros</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#convert_source.cs_utils.utils.zeropad" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeropads a number, should that number be an int or str.</p>
<dl>
<dt>Usage example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zeropad</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;05&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zeropad</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;05&#39;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num</strong> – Input number (as str or int) to zeropad.</p></li>
<li><p><strong>num_zeros</strong> – Number of zeroes to pad with.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Zeropadded string of the number, or the original string if the input string could not</dt><dd><p>be represented as an integer.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>TypeError</strong> – Error that arises if floats are passed as an argument.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-convert_source.cs_utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-convert_source.cs_utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="convert_source.imgio.html" class="btn btn-neutral float-right" title="convert_source.imgio package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="convert_source.html" class="btn btn-neutral float-left" title="convert_source package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Adebayo Braimah.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>